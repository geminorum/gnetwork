(i=>{let r=1024e3,t={},s={},l={action:"gnetwork_media",file:"#gnetwork-media-file-upload",name:"#gnetwork-media-file-name",submit:"#gnetwork-media-file-submit",progress:"#gnetwork-media-file-progress"},c={upload:function(o){let n=o+r+1;var e=s.slice(o,n);t.onloadend=function(e){if(e.target.readyState===FileReader.DONE){let a=i(l.submit);i.ajax({url:ajaxurl,type:"POST",dataType:"json",cache:!1,data:{action:l.action,what:"upload_chaunk",file_data:e.target.result,file:s.name,file_type:s.type,chunk:o,nonce:a.data("nonce")},error:function(e,t,a){console.log(e,t,a)},success:function(e){if(e.success){var t=o+r;let e=Math.floor(t/s.size*100);n<s.size?("fa_IR"===a.data("locale")&&(e=u.tP(e)),u.io(l.progress,u.sp(a.data("progress"),e)),c.upload(n)):(i(l.name).html("").hide(),i(l.submit).prop("disabled",!0),u.io(l.progress,a.data("complete")),c.complete(s.name))}else u.io(l.progress,e.data),console.log(e)}})}},t.readAsDataURL(e)},complete:function(e){var t=i(l.submit);let a=i(l.progress).prev(".spinner");i.ajax({type:"GET",url:ajaxurl,data:{action:l.action,what:"upload_complete",file:e,nonce:t.data("nonce")},beforeSend:function(e){a.addClass("is-active")},success:function(e){a.removeClass("is-active"),e.success?u.io(l.progress,e.data):(u.io(l.progress,e.data),console.log(e))}})}},u={sp:function(e){let t=Array.prototype.slice.call(arguments,1),a=0;return e.replace(/%s/g,function(){return t[a++]})},tP:function(e){let t="Û°".charCodeAt(0);return e.toString().replace(/\d+/g,function(e){return e.split("").map(function(e){return String.fromCharCode(t+parseInt(e))}).join("")})},io:function(e,t){i(e).fadeOut("fast",function(){i(this).html(t).fadeIn()})}};i(l.file).on("change",function(){var e=i(this).val();""!==e?(i(l.name).html(e).show(),i(l.submit).prop("disabled",!1)):(i(l.name).html("").hide(),i(l.submit).prop("disabled",!0))}),i(l.submit).on("click",function(e){e.preventDefault(),i(this).prop("disabled",!0),t=new FileReader,s=document.querySelector(l.file).files[0],c.upload(0)})})(jQuery);