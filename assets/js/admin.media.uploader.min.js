(function(f){var a={};var c={};var e=1000*1024;var d={action:"gnetwork_media",file:"#gnetwork-media-file-upload",name:"#gnetwork-media-file-name",submit:"#gnetwork-media-file-submit",progress:"#gnetwork-media-file-progress"};var g={upload:function(j){var i=j+e+1;var h=c.slice(j,i);a.onloadend=function(k){if(k.target.readyState!==FileReader.DONE){return}var l=f(d.submit);f.ajax({url:ajaxurl,type:"POST",dataType:"json",cache:false,data:{action:d.action,what:"upload_chaunk",file_data:k.target.result,file:c.name,file_type:c.type,chunk:j,nonce:l.data("nonce")},error:function(m,o,n){console.log(m,o,n)},success:function(m){if(m.success){var n=j+e;var o=Math.floor((n/c.size)*100);if(i<c.size){if(l.data("locale")==="fa_IR"){o=b.tP(o)}b.io(d.progress,b.sp(l.data("progress"),o));g.upload(i)}else{f(d.name).html("").hide();f(d.submit).prop("disabled",true);b.io(d.progress,l.data("complete"));g.complete(c.name)}}else{b.io(d.progress,m.data);console.log(m)}}})};a.readAsDataURL(h)},complete:function(h){var j=f(d.submit);var i=f(d.progress).prev(".spinner");f.ajax({type:"GET",url:ajaxurl,data:{action:d.action,what:"upload_complete",file:h,nonce:j.data("nonce")},beforeSend:function(k){i.addClass("is-active")},success:function(k){i.removeClass("is-active");if(k.success){b.io(d.progress,k.data)}else{b.io(d.progress,k.data);console.log(k)}}})}};var b={sp:function(k){var h=Array.prototype.slice.call(arguments,1);var j=0;return k.replace(/%s/g,function(){return h[j++]})},tP:function(i){var h="Û°".charCodeAt(0);return i.toString().replace(/\d+/g,function(j){return j.split("").map(function(k){return String.fromCharCode(h+parseInt(k))}).join("")})},io:function(j,i){f(j).fadeOut("fast",function(){f(this).html(i).fadeIn()})}};f(d.file).change(function(){var h=f(this).val();if(h!==""){f(d.name).html(h).show();f(d.submit).prop("disabled",false)}else{f(d.name).html("").hide();f(d.submit).prop("disabled",true)}});f(d.submit).on("click",function(h){h.preventDefault();f(this).prop("disabled",true);a=new FileReader();c=document.querySelector(d.file).files[0];g.upload(0)})})(jQuery);