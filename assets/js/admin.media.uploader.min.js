!function(i){const s=1024e3;let t={},r={};const c={action:"gnetwork_media",file:"#gnetwork-media-file-upload",name:"#gnetwork-media-file-name",submit:"#gnetwork-media-file-submit",progress:"#gnetwork-media-file-progress"},l={upload:function(o){const n=o+s+1;var e=r.slice(o,n);t.onloadend=function(e){if(e.target.readyState===FileReader.DONE){const a=i(c.submit);i.ajax({url:ajaxurl,type:"POST",dataType:"json",cache:!1,data:{action:c.action,what:"upload_chaunk",file_data:e.target.result,file:r.name,file_type:r.type,chunk:o,nonce:a.data("nonce")},error:function(e,t,a){console.log(e,t,a)},success:function(e){if(e.success){var t=o+s;let e=Math.floor(t/r.size*100);n<r.size?("fa_IR"===a.data("locale")&&(e=u.tP(e)),u.io(c.progress,u.sp(a.data("progress"),e)),l.upload(n)):(i(c.name).html("").hide(),i(c.submit).prop("disabled",!0),u.io(c.progress,a.data("complete")),l.complete(r.name))}else u.io(c.progress,e.data),console.log(e)}})}},t.readAsDataURL(e)},complete:function(e){var t=i(c.submit);const a=i(c.progress).prev(".spinner");i.ajax({type:"GET",url:ajaxurl,data:{action:c.action,what:"upload_complete",file:e,nonce:t.data("nonce")},beforeSend:function(e){a.addClass("is-active")},success:function(e){a.removeClass("is-active"),e.success?u.io(c.progress,e.data):(u.io(c.progress,e.data),console.log(e))}})}},u={sp:function(e){const t=Array.prototype.slice.call(arguments,1);let a=0;return e.replace(/%s/g,function(){return t[a++]})},tP:function(e){const t="Û°".charCodeAt(0);return e.toString().replace(/\d+/g,function(e){return e.split("").map(function(e){return String.fromCharCode(t+parseInt(e))}).join("")})},io:function(e,t){i(e).fadeOut("fast",function(){i(this).html(t).fadeIn()})}};i(c.file).on("change",function(){var e=i(this).val();""!==e?(i(c.name).html(e).show(),i(c.submit).prop("disabled",!1)):(i(c.name).html("").hide(),i(c.submit).prop("disabled",!0))}),i(c.submit).on("click",function(e){e.preventDefault(),i(this).prop("disabled",!0),t=new FileReader,r=document.querySelector(c.file).files[0],l.upload(0)})}(jQuery);