!function(i){var r=1024e3;let a={},s={};var l={action:"gnetwork_media",file:"#gnetwork-media-file-upload",name:"#gnetwork-media-file-name",submit:"#gnetwork-media-file-submit",progress:"#gnetwork-media-file-progress"};const c={upload:function(o){var n=o+r+1,e=s.slice(o,n);a.onloadend=function(e){if(e.target.readyState===FileReader.DONE){const t=i(l.submit);i.ajax({url:ajaxurl,type:"POST",dataType:"json",cache:!1,data:{action:l.action,what:"upload_chaunk",file_data:e.target.result,file:s.name,file_type:s.type,chunk:o,nonce:t.data("nonce")},error:function(e,a,t){console.log(e,a,t)},success:function(e){if(e.success){var a=o+r;let e=Math.floor(a/s.size*100);n<s.size?("fa_IR"===t.data("locale")&&(e=u.tP(e)),u.io(l.progress,u.sp(t.data("progress"),e)),c.upload(n)):(i(l.name).html("").hide(),i(l.submit).prop("disabled",!0),u.io(l.progress,t.data("complete")),c.complete(s.name))}else u.io(l.progress,e.data),console.log(e)}})}},a.readAsDataURL(e)},complete:function(e){const a=i(l.submit),t=i(l.progress).prev(".spinner");i.ajax({type:"GET",url:ajaxurl,data:{action:l.action,what:"upload_complete",file:e,nonce:a.data("nonce")},beforeSend:function(e){t.addClass("is-active")},success:function(e){t.removeClass("is-active"),e.success?u.io(l.progress,e.data):(u.io(l.progress,e.data),console.log(e))}})}},u={sp:function(e){var a=Array.prototype.slice.call(arguments,1);let t=0;return e.replace(/%s/g,function(){return a[t++]})},tP:function(e){var a="Û°".charCodeAt(0);return e.toString().replace(/\d+/g,function(e){return e.split("").map(function(e){return String.fromCharCode(a+parseInt(e))}).join("")})},io:function(e,a){i(e).fadeOut("fast",function(){i(this).html(a).fadeIn()})}};i(l.file).change(function(){var e=i(this).val();""!==e?(i(l.name).html(e).show(),i(l.submit).prop("disabled",!1)):(i(l.name).html("").hide(),i(l.submit).prop("disabled",!0))}),i(l.submit).on("click",function(e){e.preventDefault(),i(this).prop("disabled",!0),a=new FileReader,s=document.querySelector(l.file).files[0],c.upload(0)})}(jQuery);