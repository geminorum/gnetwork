!function(i){var r=1024e3;let a={},l={};var c="gnetwork_media",t="#gnetwork-media-file-upload",s="#gnetwork-media-file-name",d="#gnetwork-media-file-submit",u="#gnetwork-media-file-progress";const p={upload:function(o){var n=o+r+1,e=l.slice(o,n);a.onloadend=function(e){if(e.target.readyState===FileReader.DONE){const t=i(d);i.ajax({url:ajaxurl,type:"POST",dataType:"json",cache:!1,data:{action:c,what:"upload_chaunk",file_data:e.target.result,file:l.name,file_type:l.type,chunk:o,nonce:t.data("nonce")},error:function(e,a,t){console.log(e,a,t)},success:function(e){if(e.success){var a=o+r;let e=Math.floor(a/l.size*100);n<l.size?("fa_IR"===t.data("locale")&&(e=f.tP(e)),f.io(u,f.sp(t.data("progress"),e)),p.upload(n)):(i(s).html("").hide(),i(d).prop("disabled",!0),f.io(u,t.data("complete")),p.complete(l.name))}else f.io(u,e.data),console.log(e)}})}},a.readAsDataURL(e)},complete:function(e){const a=i(d),t=i(u).prev(".spinner");i.ajax({type:"GET",url:ajaxurl,data:{action:c,what:"upload_complete",file:e,nonce:a.data("nonce")},beforeSend:function(e){t.addClass("is-active")},success:function(e){t.removeClass("is-active"),e.success?f.io(u,e.data):(f.io(u,e.data),console.log(e))}})}},f={sp:function(e){var a=Array.prototype.slice.call(arguments,1);let t=0;return e.replace(/%s/g,function(){return a[t++]})},tP:function(e){var a="Û°".charCodeAt(0);return e.toString().replace(/\d+/g,function(e){return e.split("").map(function(e){return String.fromCharCode(a+parseInt(e))}).join("")})},io:function(e,a){i(e).fadeOut("fast",function(){i(this).html(a).fadeIn()})}};i(t).on("change",function(){var e=i(this).val();""!==e?(i(s).html(e).show(),i(d).prop("disabled",!1)):(i(s).html("").hide(),i(d).prop("disabled",!0))}),i(d).on("click",function(e){e.preventDefault(),i(this).prop("disabled",!0),a=new FileReader,l=document.querySelector(t).files[0],p.upload(0)})}(jQuery);