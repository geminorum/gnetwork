(function(){tinymce.PluginManager.add("gnetworkemail",function(b,a){b.addShortcut("ctrl+e",b.getLang("gnetwork.gnetworkemail-title"),"gnetworkemail");b.addCommand("gnetworkemail",function(){var c=b.selection.getContent();b.insertContent("[email]"+(c?c+"[/email]":""))});b.addButton("gnetworkemail",{title:b.getLang("gnetwork.gnetworkemail-attr"),icon:"icon gnetwork-tinymce-icon icon-gnetworkemail",onclick:function(){var c=b.selection.getContent();b.windowManager.open({title:b.getLang("gnetwork.gnetworkemail-title"),minWidth:450,body:[{type:"textbox",name:"email",label:b.getLang("gnetwork.gnetworkemail-email"),value:c,style:"direction:ltr;text-align:left;",},{type:"textbox",name:"text",label:b.getLang("gnetwork.gnetworkemail-text"),value:c,},{type:"textbox",name:"subject",label:b.getLang("gnetwork.gnetworkemail-subject"),autofocus:c,},{type:"textbox",name:"hover",label:b.getLang("gnetwork.gnetworkemail-hover"),}],buttons:[{text:"Insert",subtype:"primary",onclick:"submit"},{text:"Close",onclick:"close"}],onsubmit:function(f){var d="[email"+(f.data.subject?' subject="'+f.data.subject+'"':"")+(f.data.hover?' title="'+f.data.hover+'"':"");if(f.data.email&&f.data.text&&f.data.text==f.data.email){b.insertContent(d+"]"+f.data.email+"[/email]")}else{if(!f.data.text){b.insertContent(d+"]"+f.data.email+"[/email]")}else{if(!f.data.email){b.insertContent(d+' content="'+f.data.text+'" /]')}else{b.insertContent(d+' email="'+f.data.email+'"]'+f.data.text+"[/email]")}}}}})}})})})();