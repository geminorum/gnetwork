window.tinymce.PluginManager.add("gnetworkref",function(e,t){e.addShortcut("ctrl+q",e.getLang("gnetwork.gnetworkref-title"),"gnetworkref"),e.addCommand("gnetworkref",function(){var t=e.selection.getContent();e.insertContent("[ref]"+(t?t.trim():"")+"[/ref]")}),e.addButton("gnetworkref",{title:e.getLang("gnetwork.gnetworkref-attr"),icon:"icon gnetwork-tinymce-icon icon-gnetworkref",onclick:function(){var t=e.selection.getContent();e.windowManager.open({title:e.getLang("gnetwork.gnetworkref-title"),minWidth:450,body:[{type:"textbox",name:"text",label:e.getLang("gnetwork.gnetworkref-text"),value:t.trim(),multiline:!0,minHeight:130},{type:"textbox",name:"url",label:e.getLang("gnetwork.gnetworkref-url"),style:"direction:ltr;text-align:left;",autofocus:t.trim()}],buttons:[{text:"Insert",subtype:"primary",onclick:"submit"},{text:"Close",onclick:"close"}],onsubmit:function(t){e.insertContent((t.data.url?'[ref url="'+encodeURI(t.data.url)+'"]':"[ref]")+(t.data.text?t.data.text.trim()+"[/ref]":"[/ref]"))}})}})});