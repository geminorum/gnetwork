!function(t){t.PluginManager.add("gnetworkref",function(t,e){t.addShortcut("ctrl+q",t.getLang("gnetwork.gnetworkref-title"),"gnetworkref"),t.addCommand("gnetworkref",function(){var e=t.selection.getContent();t.insertContent("[ref]"+(e?e.trim():"")+"[/ref]")}),t.addButton("gnetworkref",{title:t.getLang("gnetwork.gnetworkref-attr"),icon:"icon gnetwork-tinymce-icon icon-gnetworkref",onclick:function(){var e=t.selection.getContent();t.windowManager.open({title:t.getLang("gnetwork.gnetworkref-title"),minWidth:450,body:[{type:"textbox",name:"text",label:t.getLang("gnetwork.gnetworkref-text"),value:e.trim(),multiline:!0,minHeight:130},{type:"textbox",name:"url",label:t.getLang("gnetwork.gnetworkref-url"),style:"direction:ltr;text-align:left;",autofocus:e.trim()}],buttons:[{text:"Insert",subtype:"primary",onclick:"submit"},{text:"Close",onclick:"close"}],onsubmit:function(e){t.insertContent((e.data.url?'[ref url="'+encodeURI(e.data.url)+'"]':"[ref]")+(e.data.text?e.data.text.trim()+"[/ref]":"[/ref]"))}})}})})}(window.tinymce);