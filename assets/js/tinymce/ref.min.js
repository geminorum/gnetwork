(function(a){a.PluginManager.add("gnetworkref",function(c,b){c.addShortcut("ctrl+q",c.getLang("gnetwork.gnetworkref-title"),"gnetworkref");c.addCommand("gnetworkref",function(){var d=c.selection.getContent();c.insertContent("[ref]"+(d?d:"")+"[/ref]")});c.addButton("gnetworkref",{title:c.getLang("gnetwork.gnetworkref-attr"),icon:"icon gnetwork-tinymce-icon icon-gnetworkref",onclick:function(){var d=c.selection.getContent();c.windowManager.open({title:c.getLang("gnetwork.gnetworkref-title"),minWidth:450,body:[{type:"textbox",name:"text",label:c.getLang("gnetwork.gnetworkref-text"),value:d,multiline:true,minHeight:130,},{type:"textbox",name:"url",label:c.getLang("gnetwork.gnetworkref-url"),style:"direction:ltr;text-align:left;",autofocus:d,}],buttons:[{text:"Insert",subtype:"primary",onclick:"submit"},{text:"Close",onclick:"close"}],onsubmit:function(f){c.insertContent((f.data.url?'[ref url="'+encodeURI(f.data.url)+'"]':"[ref]")+(f.data.text?f.data.text+"[/ref]":"[/ref]"))}})}})})})(window.tinymce);