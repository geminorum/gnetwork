window.tinymce.PluginManager.add("gnetworkemail",function(a,t){a.addShortcut("ctrl+e",a.getLang("gnetwork.gnetworkemail-title"),"gnetworkemail"),a.addCommand("gnetworkemail",function(){var t=a.selection.getContent();a.insertContent("[email]"+(t?t+"[/email]":""))}),a.addButton("gnetworkemail",{title:a.getLang("gnetwork.gnetworkemail-attr"),icon:"icon gnetwork-tinymce-icon icon-gnetworkemail",onclick:function(){var t=a.selection.getContent();a.windowManager.open({title:a.getLang("gnetwork.gnetworkemail-title"),minWidth:450,body:[{type:"textbox",name:"email",label:a.getLang("gnetwork.gnetworkemail-email"),value:t,style:"direction:ltr;text-align:left;"},{type:"textbox",name:"text",label:a.getLang("gnetwork.gnetworkemail-text"),value:t},{type:"textbox",name:"subject",label:a.getLang("gnetwork.gnetworkemail-subject"),autofocus:t},{type:"textbox",name:"hover",label:a.getLang("gnetwork.gnetworkemail-hover")}],buttons:[{text:"Insert",subtype:"primary",onclick:"submit"},{text:"Close",onclick:"close"}],onsubmit:function(t){var e="[email"+(t.data.subject?' subject="'+t.data.subject+'"':"")+(t.data.hover?' title="'+t.data.hover+'"':"");(!t.data.email||!t.data.text||t.data.text!==t.data.email)&&t.data.text?t.data.email?a.insertContent(e+' email="'+t.data.email+'"]'+t.data.text+"[/email]"):a.insertContent(e+' content="'+t.data.text+'" /]'):a.insertContent(e+"]"+t.data.email+"[/email]")}})}})});